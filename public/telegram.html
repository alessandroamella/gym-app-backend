<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Telegram Login</title>
    </head>
    <body>
        <script
            async
            src="https://telegram.org/js/telegram-widget.js?22"
            data-telegram-login="gym_app_login_bot"
            data-size="large"
            data-onauth="onTelegramAuth(user)"
        ></script>
        <script type="text/javascript">
            function onTelegramAuth(user) {
                window.alert(`Logged in as: ${user.first_name}`);

                // get redirect_url from query string
                const urlParams = new URLSearchParams(window.location.search);
                const redirect_url = urlParams.get("redirect_url");

                // redirect to the redirect_url
                window.location.href = redirect_url;
            }
        </script>
    </body>
</html>
